(this["webpackJsonpreact-cms"]=this["webpackJsonpreact-cms"]||[]).push([[0],{173:function(e,t,a){e.exports=a(187)},179:function(e,t,a){},187:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(11),i=a.n(o),c=a(144),l=(a(178),a(179),a(13)),s=a(52),u=function(e){return console.log("Roots",e),console.log("state",e.store.getState()),r.a.createElement(l.a,{store:e.store},r.a.createElement(s.c,{history:e.history},e.routes.map((function(e,t){return r.a.createElement(s.b,{key:t,path:e.path,render:function(t){return r.a.createElement(e.component,Object.assign({},t,{routes:e.routes,title:e.title}))}})}))))},m=a(27),d=Object(m.a)();d.listen((function(e){console.log("history is listening: "+e)}));var p=d,g=a(70),h=a(135),f=a(17),b=a(14),y=a(19),E=a(20),O=a(21),v=function(e){function t(e){return Object(f.a)(this,t),Object(y.a)(this,Object(E.a)(t).call(this,e))}return Object(O.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){console.log("Profile",this.props);var e=this.props,t=e.name;e.match;return r.a.createElement("div",null,r.a.createElement("h2",null,"\u041f\u0440\u0438\u0432\u0435\u0442, ",t))}}]),t}(r.a.Component),j=Object(l.b)((function(e){return e.Profile}))(v),x=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e},r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;return{title:e,path:t,component:a,reducer:n,onEnter:o,children:r}},w=function(e){return Object.keys(e).map((function(t){var a=Array.isArray(e[t])?e[t]:[e[t]];return a.forEach((function(e){return e.MODULE=t})),a})).reduce((function(e,t){return e.concat(t)}))},D=x("\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442","/profile",j,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:"\u0416\u0430\u0432\u043b\u043e\u043d\u0431\u0435\u043a"},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"Profile/SetName":return{name:t.name};default:return e}})),P=a(7),S=a(313),k=a(314),C=a(15),I=a(2),q=a(10),A=a(139),R=a(284),N=a(285),T=a(296),B=a(277),F=a(279),_=a(280),z=a(298),H=a(290),W=a(297),L=a(294),M=a(295),J=a(281),V=a(67),U=a.n(V),G=a(68),Y=a.n(G),K=a(293),X=a(283),$=a(286),Q=a(287),Z=a(288),ee=a(317),te=a(316),ae=a(38);var ne=a(3),re=a(201),oe=a(77),ie=a(148),ce=a(138),le=a.n(ce),se=Object(re.a)((function(e){return{root:{borderRadius:"4px",alignItems:"center",padding:e.spacing(1),display:"flex",flexBasis:420},icon:{marginRight:e.spacing(1),color:e.palette.text.secondary},input:{flexGrow:1,fontSize:"14px",lineHeight:"16px",letterSpacing:"-0.05px"}}})),ue=function(e){var t=e.className,a=e.onChange,n=e.style,o=Object(I.a)(e,["className","onChange","style"]),i=se();return r.a.createElement(oe.a,Object.assign({},o,{className:Object(ne.a)(i.root,t),style:n}),r.a.createElement(le.a,{className:i.icon}),r.a.createElement(ie.a,Object.assign({},o,{className:i.input,disableUnderline:!0,onChange:a})))},me=function(e){return function(t){return Object(l.b)(null,(function(e){return{setTitle:function(t){e({type:Ja,payload:t})}}}))((function(a){return a.setTitle(t),r.a.createElement(e,null)}))}};function de(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var pe=Object(A.a)((function(e){return{seeMore:{marginTop:e.spacing(3)},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{display:"flex",overflow:"auto",flexDirection:"column"},cardContent:{padding:0},loader:{margin:"auto"},addButton:{height:"100%",float:"right"}}}));function ge(e){var t=e.onClose,a=e.open,n=e.deleteId,o=Object(I.a)(e,["onClose","open","deleteId"]);return r.a.createElement(B.a,Object.assign({disableBackdropClick:!0,disableEscapeKeyDown:!0,maxWidth:"xs","aria-labelledby":"confirmation-dialog-title",open:a},o),r.a.createElement(F.a,{dividers:!0},"Are you sure to delete this item? You will not be able to recover this"),r.a.createElement(_.a,null,r.a.createElement(J.a,{autoFocus:!0,onClick:function(e){return t("cancel")},color:"primary"},"Cancel"),r.a.createElement(J.a,{onClick:function(e){return t("ok",n)},color:"primary"},"Ok")))}var he=function(e){var t=pe(),a=e.header?r.a.createElement(X.a,{title:e.header}):"",o=Object(n.useState)(10),i=Object(C.a)(o,2),c=i[0],l=i[1],s=Object(n.useState)(0),u=Object(C.a)(s,2),m=u[0],d=u[1];return r.a.createElement(R.a,{maxWidth:"lg",className:t.container},r.a.createElement(N.a,{container:!0,spacing:3},r.a.createElement(N.a,{item:!0,xs:6},r.a.createElement(ue,{placeholder:"search employee"})),r.a.createElement(N.a,{item:!0,xs:6},r.a.createElement(q.a,{to:e.path+"/add"},r.a.createElement(J.a,{className:t.addButton,color:"primary",variant:"contained"},"Add employee"))),r.a.createElement(N.a,{item:!0,xs:12},r.a.createElement($.a,{className:t.paper},r.a.createElement(Q.a,{className:t.cardContent},a,r.a.createElement(fe,e)),r.a.createElement(Z.a,{className:t.actions},r.a.createElement(ee.a,{component:"div",count:e.requests?e.requests.length:0,onChangePage:function(e,t){d(t)},onChangeRowsPerPage:function(e){l(e.target.value)},page:m,rowsPerPage:c,rowsPerPageOptions:[5,10,25]}))))))},fe=function(e){var t=e.requests,a=e.showDeleteDialog,o=e.path,i=e.loading,c=pe(),l=Object(n.useState)([]),s=Object(C.a)(l,2),u=s[0],m=s[1];if(!t||i)return r.a.createElement(K.a,{className:c.loader});var d=t.map((function(e,t){return r.a.createElement(L.a,{key:t},r.a.createElement(H.a,null,r.a.createElement(te.a,{checked:-1!==u.indexOf(e._id),color:"primary",onChange:function(t){return function(e,t){var a=u.indexOf(t),n=[];-1===a?n=n.concat(u,t):0===a?n=n.concat(u.slice(1)):a===u.length-1?n=n.concat(u.slice(0,-1)):a>0&&(n=n.concat(u.slice(0,a),u.slice(a+1))),m(n)}(0,e._id)},value:"true"})),r.a.createElement(H.a,null,e.name),r.a.createElement(H.a,null,e.email),r.a.createElement(H.a,null,e.address),r.a.createElement(H.a,null,e.message),r.a.createElement(H.a,{align:"right"},r.a.createElement(q.a,{to:o+"/edit/"+e._id},r.a.createElement(M.a,{color:"secondary",size:"small","aria-label":"Edit"},r.a.createElement(U.a,null))),r.a.createElement(M.a,{size:"small","aria-label":"Delete",className:"ml-2",onClick:function(t){return a(e._id)}},r.a.createElement(Y.a,null))))}));return r.a.createElement(T.a,{size:"small"},r.a.createElement(W.a,null,r.a.createElement(L.a,null,r.a.createElement(H.a,null,r.a.createElement(te.a,{checked:u.length===t.length,color:"primary",indeterminate:u.length>0&&u.length<t.length,onChange:function(e){var a,n=t;a=e.target.checked?n.map((function(e){return e._id})):[],m(a)}})),r.a.createElement(H.a,null,"Name"),r.a.createElement(H.a,null,"Email"),r.a.createElement(H.a,null,"Address"),r.a.createElement(H.a,null,"Description"),r.a.createElement(H.a,{align:"right"},"Action"))),r.a.createElement(z.a,null,d))},be=function(e){function t(e){return Object(f.a)(this,t),Object(y.a)(this,Object(E.a)(t).call(this,e))}return Object(O.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.requests,a=e.loadRequests;t&&t.length||a()}},{key:"render",value:function(){console.log("Request List",this.props);var e=this.props,t=e.match,a=e.requests,n=e.loadingRequests,o=e.showDeleteDialog,i=e.closeDeleteDialog,c=e.deleteDialogOpen,l=e.deleteId,s=e.header;return r.a.createElement(r.a.Fragment,null,r.a.createElement(he,{requests:a,loading:n,path:t?t.path:"/admin/employees",showDeleteDialog:o,header:s}),r.a.createElement(ge,{id:"ringtone-menu",deleteId:l,keepMounted:!0,open:c,onClose:i}))}}]),t}(r.a.Component),ye=Object(l.b)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?de(a,!0).forEach((function(t){Object(P.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):de(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e.Admin.Request)}),(function(e){return{loadRequests:function(){return e({type:Te}),fetch("/api/request/get").then((function(e){return e.ok?e.json():[]})).then((function(t){e({type:Be,payload:{requests:t}})}))},showDeleteDialog:function(t){e({type:We,payload:{deleteId:t}})},closeDeleteDialog:function(t,a){if(e({type:Le}),console.log("close",t),"ok"===t&&a){var n={id:a};return fetch("/api/request/delete",{method:"POST",body:JSON.stringify(n),headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.ok?e.json():{}})).then((function(t){t.result&&"success"===t.result&&e({type:Me,payload:{request:t.data}})}))}}}}))(be),Ee=me(ye)("Employees"),Oe=a(299),ve=a(291),je=a(197),xe=a(196),we=a(202),De=a(300),Pe=a(43),Se=a.n(Pe),ke=Object(A.a)((function(e){return{container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},textField:{width:"100%"},themesSelect:{width:"100%"},button:{float:"right"}}}));function Ce(e){var t=e.request,a=e.match,n=(e.themes,e.update),o=e.action,i=e.saving,c=ke(),l=r.a.useState(""),u=Object(C.a)(l,2),m=u[0],d=u[1];return m?(console.log("redirecting",m),r.a.createElement(s.a,{to:m})):r.a.createElement(R.a,{maxWidth:"lg",className:c.container},r.a.createElement(N.a,{container:!0,spacing:3},r.a.createElement(N.a,{item:!0,xs:6},r.a.createElement(q.a,{to:"/admin/employees"},r.a.createElement(J.a,{variant:"contained",color:"primary"},r.a.createElement(Se.a,null)," Back to list"))),r.a.createElement(N.a,{item:!0,xs:12},r.a.createElement(oe.a,{className:c.paper},r.a.createElement("form",{onSubmit:function(e){var t=e.target.elements,r={name:t.name.value,email:t.email.value,address:t.address.value,message:t.message.value};"edit"===o&&(r.id=a.params.requestId),n(r).then((function(e){"success"===e.result&&d("/admin/request")})),e.preventDefault()}},r.a.createElement(N.a,{container:!0,spacing:3},r.a.createElement(N.a,{item:!0,sm:6},r.a.createElement(Oe.a,{id:"outlined-basic",className:c.textField,label:"Name",margin:"normal",variant:"outlined",name:"name",defaultValue:t.name,required:!0})),r.a.createElement(N.a,{item:!0,sm:6},r.a.createElement(Oe.a,{id:"outlined-basic",className:c.textField,label:"Email",margin:"normal",variant:"outlined",name:"email",defaultValue:t.email})),r.a.createElement(N.a,{item:!0,sm:12},r.a.createElement(Oe.a,{id:"outlined-basic",className:c.textField,label:"Address",margin:"normal",variant:"outlined",name:"address",defaultValue:t.address})),r.a.createElement(N.a,{item:!0,sm:12},r.a.createElement(Oe.a,{id:"outlined-multiline-static",label:"Description",multiline:!0,rows:"4",defaultValue:t.message,className:c.textField,margin:"normal",variant:"outlined",name:"message"})),r.a.createElement(N.a,{item:!0,sm:12},r.a.createElement(J.a,{type:"submit",variant:"contained",color:"primary",className:c.button,disabled:i},i?r.a.createElement(K.a,{size:"1rem"}):"Save"))))))))}var Ie=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(y.a)(this,Object(E.a)(t).call(this,e))).state={action:""},a}return Object(O.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.loadRequest,a=e.match,n=e.setTitle;a.params.requestId?(this.setState({action:"edit"}),n("Edit employee"),t(a.params.requestId)):(this.setState({action:"add"}),n("Add employee"))}},{key:"render",value:function(){console.log("Edit Request",this.props);var e=this.props,t=e.match,a=e.request,n=e.themes,o=e.update,i=e.loadingRequest,c=e.saving,l=this.state.action;return i?r.a.createElement(De.a,null):r.a.createElement(Ce,{action:l,request:"edit"==l?a:{},match:t,themes:n,update:o,saving:c})}}]),t}(r.a.Component),qe=Object(l.b)((function(e){var t=e.Admin.Request;return{requests:t.requests,request:t.request,loadingRequest:t.loadingRequest,saving:t.saving}}),(function(e){return{loadRequest:function(t){return e({type:Fe}),fetch("/api/request/get?id="+t).then((function(e){return e.ok?e.json():{}})).then((function(t){e({type:_e,payload:{request:t}})}))},setTitle:function(t){e({type:Ja,payload:t})},update:function(t){return e({type:ze}),fetch("/api/request/store",{method:"POST",body:JSON.stringify(t),headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.ok?e.json():{}})).then((function(t){return e({type:He,payload:{request:t.data,result:t.result}}),t}))}}}))(Ie);function Ae(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Re(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ae(a,!0).forEach((function(t){Object(P.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ae(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Ne="Admin/Request/",Te=Ne+"LoadRequestsReq",Be=Ne+"LoadRequestsRes",Fe=Ne+"LoadRequestReq",_e=Ne+"LoadRequestRes",ze=Ne+"SaveReq",He=Ne+"SaveRes",We=Ne+"ShowDeleteDialog",Le=Ne+"CloseDeleteDialog",Me=Ne+"DeleteRes",Je={requests:[],loadingRequests:!1,request:{},loadingRequest:!1,deleteDialogOpen:!1,deleteId:"",saving:!1},Ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Fe:return Re({},e,{loadingRequest:!0});case _e:return Re({},e,{request:a=t.payload.request,loadingRequest:!1});case Te:return Re({},e,{loadingRequests:!0});case Be:return Re({},e,{loadingRequests:!1,requests:t.payload.requests});case ze:return Re({},e,{saving:!0});case He:var a=t.payload.request,n=!1,r=e.requests.map((function(e,t){return e&&e._id===a._id?(n=!0,a):e}));return n||r.push(a),Re({},e,{requests:r,saving:!1});case We:return Re({},e,{deleteDialogOpen:!0,deleteId:t.payload.deleteId});case Le:return Re({},e,{deleteDialogOpen:!1});case Me:a=t.payload.request;return Re({},e,{requests:e.requests.filter((function(e){return e._id!==a._id}))});default:return e}},Ue=x("Employees","/employees",(function(e){return r.a.createElement("div",null,r.a.createElement(s.b,{exact:!0,path:e.match.path,component:Ee}),r.a.createElement(s.b,{exact:!0,path:e.match.path+"/edit/:requestId",component:qe}),r.a.createElement(s.b,{exact:!0,path:e.match.path+"/add",component:qe}))}),Ve),Ge=a(301);function Ye(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var Ke=Object(A.a)((function(e){return{container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"}}}));var Xe=me(Object(l.b)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ye(a,!0).forEach((function(t){Object(P.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ye(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e.Dashboard)}),(function(e){return{}}))((function(e){var t=Ke();return Object(ne.a)(t.paper,t.fixedHeight),console.log("Dashboard",e),r.a.createElement(r.a.Fragment,null,r.a.createElement(ye,{employees:e.employees,header:"Employees"}),r.a.createElement(R.a,{maxWidth:"lg",className:t.container},r.a.createElement(N.a,{container:!0,spacing:3},r.a.createElement(N.a,{item:!0,xs:12},r.a.createElement(oe.a,{className:t.paper},"Some Dashboard Content")))))})))("Dashboard"),$e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:"DEFAULT"},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"Dashboard/FirstAction":return{name:"Javlonbek"};default:return e}},Qe=x("Dashboard","/",Xe,$e);function Ze(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var et=Object(A.a)((function(e){return{seeMore:{marginTop:e.spacing(3)},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{display:"flex",overflow:"auto",flexDirection:"column"},cardContent:{padding:0},loader:{margin:"auto"},addButton:{height:"100%",float:"right"}}}));function tt(e){var t=e.onClose,a=e.open,n=e.deleteId,o=Object(I.a)(e,["onClose","open","deleteId"]);return r.a.createElement(B.a,Object.assign({disableBackdropClick:!0,disableEscapeKeyDown:!0,maxWidth:"xs","aria-labelledby":"confirmation-dialog-title",open:a},o),r.a.createElement(F.a,{dividers:!0},"Are you sure to delete this item? You will not be able to recover this"),r.a.createElement(_.a,null,r.a.createElement(J.a,{autoFocus:!0,onClick:function(e){return t("cancel")},color:"primary"},"Cancel"),r.a.createElement(J.a,{onClick:function(e){return t("ok",n)},color:"primary"},"Ok")))}var at=function(e){var t=et(),a=e.header?r.a.createElement(X.a,{title:e.header}):"",o=Object(n.useState)(10),i=Object(C.a)(o,2),c=i[0],l=i[1],s=Object(n.useState)(0),u=Object(C.a)(s,2),m=u[0],d=u[1];return r.a.createElement(R.a,{maxWidth:"lg",className:t.container},r.a.createElement(N.a,{container:!0,spacing:3},r.a.createElement(N.a,{item:!0,xs:6},r.a.createElement(ue,{placeholder:"search product"})),r.a.createElement(N.a,{item:!0,xs:6},r.a.createElement(q.a,{to:e.path+"/add"},r.a.createElement(J.a,{className:t.addButton,color:"primary",variant:"contained"},"Add product"))),r.a.createElement(N.a,{item:!0,xs:12},r.a.createElement($.a,{className:t.paper},r.a.createElement(Q.a,{className:t.cardContent},a,r.a.createElement(nt,e)),r.a.createElement(Z.a,{className:t.actions},r.a.createElement(ee.a,{component:"div",count:e.items?e.items.length:0,onChangePage:function(e,t){d(t)},onChangeRowsPerPage:function(e){l(e.target.value)},page:m,rowsPerPage:c,rowsPerPageOptions:[5,10,25]}))))))},nt=function(e){var t=e.items,a=e.showDeleteDialog,o=e.path,i=e.loading,c=et(),l=Object(n.useState)([]),s=Object(C.a)(l,2),u=s[0],m=s[1];if(!t||i)return r.a.createElement(K.a,{className:c.loader});var d=t.map((function(e,t){return r.a.createElement(L.a,{key:t},r.a.createElement(H.a,null,r.a.createElement(te.a,{checked:-1!==u.indexOf(e._id),color:"primary",onChange:function(t){return function(e,t){var a=u.indexOf(t),n=[];-1===a?n=n.concat(u,t):0===a?n=n.concat(u.slice(1)):a===u.length-1?n=n.concat(u.slice(0,-1)):a>0&&(n=n.concat(u.slice(0,a),u.slice(a+1))),m(n)}(0,e._id)},value:"true"})),r.a.createElement(H.a,null,e.name),r.a.createElement(H.a,null,e.category.name),r.a.createElement(H.a,null,e.price),r.a.createElement(H.a,{align:"right"},r.a.createElement(q.a,{to:o+"/edit/"+e._id},r.a.createElement(M.a,{color:"secondary",size:"small","aria-label":"Edit"},r.a.createElement(U.a,null))),r.a.createElement(M.a,{size:"small","aria-label":"Delete",className:"ml-2",onClick:function(t){return a(e._id)}},r.a.createElement(Y.a,null))))}));return r.a.createElement(T.a,{size:"small"},r.a.createElement(W.a,null,r.a.createElement(L.a,null,r.a.createElement(H.a,null,r.a.createElement(te.a,{checked:u.length===t.length,color:"primary",indeterminate:u.length>0&&u.length<t.length,onChange:function(e){var a;a=e.target.checked?t.map((function(e){return e._id})):[],m(a)}})),r.a.createElement(H.a,null,"Name"),r.a.createElement(H.a,null,"Category"),r.a.createElement(H.a,null,"Price"),r.a.createElement(H.a,{align:"right"},"Action"))),r.a.createElement(z.a,null,d))},rt=function(e){function t(e){return Object(f.a)(this,t),Object(y.a)(this,Object(E.a)(t).call(this,e))}return Object(O.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=(e.items,e.loadItems);e.shouldLoadItems&&t()}},{key:"render",value:function(){console.log("Request List",this.props);var e=this.props,t=e.match,a=e.items,n=e.loadingItems,o=e.showDeleteDialog,i=e.closeDeleteDialog,c=e.deleteDialogOpen,l=e.deleteId,s=e.header;return r.a.createElement(r.a.Fragment,null,r.a.createElement(at,{items:a,loading:n,path:t?t.path:"/admin/products",showDeleteDialog:o,header:s}),r.a.createElement(tt,{id:"ringtone-menu",deleteId:l,keepMounted:!0,open:c,onClose:i}))}}]),t}(r.a.Component),ot=me(Object(l.b)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ze(a,!0).forEach((function(t){Object(P.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ze(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e.Admin.Product)}),(function(e){return{loadItems:function(){return e({type:_t}),fetch("/api/product/get").then((function(e){return e.ok?e.json():[]})).then((function(t){e({type:zt,payload:{items:t}})}))},showDeleteDialog:function(t){e({type:Jt,payload:{deleteId:t}})},closeDeleteDialog:function(t,a){if(e({type:Vt}),console.log("close",t),"ok"===t&&a){var n={id:a};return fetch("/api/product/delete",{method:"POST",body:JSON.stringify(n),headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.ok?e.json():{}})).then((function(t){t.result&&"success"===t.result&&e({type:Ut,payload:{item:t.data}})}))}}}}))(rt))("Products");function it(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var ct=Object(A.a)((function(e){return{seeMore:{marginTop:e.spacing(3)},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{display:"flex",overflow:"auto",flexDirection:"column"},cardContent:{padding:0,textAlign:"center"},loader:{margin:"auto"},addButton:{height:"100%",float:"right"}}}));function lt(e){var t=e.onClose,a=e.open,n=e.deleteId,o=Object(I.a)(e,["onClose","open","deleteId"]);return r.a.createElement(B.a,Object.assign({disableBackdropClick:!0,disableEscapeKeyDown:!0,maxWidth:"xs","aria-labelledby":"confirmation-dialog-title",open:a},o),r.a.createElement(F.a,{dividers:!0},"Are you sure to delete this item? You will not be able to recover this"),r.a.createElement(_.a,null,r.a.createElement(J.a,{autoFocus:!0,onClick:function(e){return t("cancel")},color:"primary"},"Cancel"),r.a.createElement(J.a,{onClick:function(e){return t("ok",n)},color:"primary"},"Ok")))}var st=function(e){var t=ct(),a=e.header?r.a.createElement(X.a,{title:e.header}):"",o=Object(n.useState)(10),i=Object(C.a)(o,2),c=i[0],l=i[1],s=Object(n.useState)(0),u=Object(C.a)(s,2),m=u[0],d=u[1];return r.a.createElement(R.a,{maxWidth:"lg",className:t.container},r.a.createElement(N.a,{container:!0,spacing:3},r.a.createElement(N.a,{item:!0,xs:6},r.a.createElement(ue,{placeholder:"search category"})),r.a.createElement(N.a,{item:!0,xs:6},r.a.createElement(q.a,{to:e.path+"/add"},r.a.createElement(J.a,{className:t.addButton,color:"primary",variant:"contained"},"Add Category"))),r.a.createElement(N.a,{item:!0,xs:12},r.a.createElement($.a,{className:t.paper},r.a.createElement(Q.a,{className:t.cardContent},a,r.a.createElement(ut,e)),r.a.createElement(Z.a,{className:t.actions},r.a.createElement(ee.a,{component:"div",count:e.items?e.items.length:0,onChangePage:function(e,t){d(t)},onChangeRowsPerPage:function(e){l(e.target.value)},page:m,rowsPerPage:c,rowsPerPageOptions:[5,10,25]}))))))},ut=function(e){var t=e.items,a=e.showDeleteDialog,o=e.path,i=e.loading,c=ct(),l=Object(n.useState)([]),s=Object(C.a)(l,2),u=s[0],m=s[1];if(!t||i)return r.a.createElement(K.a,{className:c.loader});var d=t.map((function(e,t){return r.a.createElement(L.a,{key:t},r.a.createElement(H.a,null,r.a.createElement(te.a,{checked:-1!==u.indexOf(e._id),color:"primary",onChange:function(t){return function(e,t){var a=u.indexOf(t),n=[];-1===a?n=n.concat(u,t):0===a?n=n.concat(u.slice(1)):a===u.length-1?n=n.concat(u.slice(0,-1)):a>0&&(n=n.concat(u.slice(0,a),u.slice(a+1))),m(n)}(0,e._id)},value:"true"})),r.a.createElement(H.a,null,e.name),r.a.createElement(H.a,{align:"right"},r.a.createElement(q.a,{to:o+"/edit/"+e._id},r.a.createElement(M.a,{color:"secondary",size:"small","aria-label":"Edit"},r.a.createElement(U.a,null))),r.a.createElement(M.a,{size:"small","aria-label":"Delete",className:"ml-2",onClick:function(t){return a(e._id)}},r.a.createElement(Y.a,null))))}));return r.a.createElement(T.a,{size:"small"},r.a.createElement(W.a,null,r.a.createElement(L.a,null,r.a.createElement(H.a,null,r.a.createElement(te.a,{checked:u.length===t.length,color:"primary",indeterminate:u.length>0&&u.length<t.length,onChange:function(e){var a;a=e.target.checked?t.map((function(e){return e._id})):[],m(a)}})),r.a.createElement(H.a,null,"Name"),r.a.createElement(H.a,{align:"right"},"Action"))),r.a.createElement(z.a,null,d))},mt=function(e){function t(e){return Object(f.a)(this,t),Object(y.a)(this,Object(E.a)(t).call(this,e))}return Object(O.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.items,a=e.loadItems;t&&t.length||a()}},{key:"render",value:function(){console.log("Category List",this.props);var e=this.props,t=e.match,a=e.items,n=e.loadingItems,o=e.showDeleteDialog,i=e.closeDeleteDialog,c=e.deleteDialogOpen,l=e.deleteId,s=e.header;return r.a.createElement(r.a.Fragment,null,r.a.createElement(st,{items:a,loading:n,path:t?t.path:"/admin/categories",showDeleteDialog:o,header:s}),r.a.createElement(lt,{id:"ringtone-menu",deleteId:l,keepMounted:!0,open:c,onClose:i}))}}]),t}(r.a.Component),dt=me(Object(l.b)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?it(a,!0).forEach((function(t){Object(P.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):it(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e.Admin.Category)}),(function(e){return{loadItems:function(){return e({type:Et}),fetch("/api/category/get").then((function(e){return e.ok?e.json():[]})).then((function(t){e({type:Ot,payload:{items:t}})}))},showDeleteDialog:function(t){e({type:Dt,payload:{deleteId:t}})},closeDeleteDialog:function(t,a){if(e({type:Pt}),console.log("close",t),"ok"===t&&a){var n={id:a};return fetch("/api/category/delete",{method:"POST",body:JSON.stringify(n),headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.ok?e.json():{}})).then((function(t){t.result&&"success"===t.result&&e({type:St,payload:{item:t.data}})}))}}}}))(mt))("Categories"),pt=Object(A.a)((function(e){return{container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},textField:{width:"100%"},themesSelect:{width:"100%"},button:{float:"right"}}}));function gt(e){var t=e.item,a=e.match,n=(e.themes,e.update),o=e.action,i=e.saving,c=pt(),l=r.a.useState(""),u=Object(C.a)(l,2),m=u[0],d=u[1];return m?(console.log("redirecting",m),r.a.createElement(s.a,{to:m})):r.a.createElement(R.a,{maxWidth:"lg",className:c.container},r.a.createElement(N.a,{container:!0,spacing:3},r.a.createElement(N.a,{item:!0,xs:6},r.a.createElement(q.a,{to:"/admin/categories"},r.a.createElement(J.a,{variant:"contained",color:"primary"},r.a.createElement(Se.a,null)," Back to list"))),r.a.createElement(N.a,{item:!0,xs:12},r.a.createElement(oe.a,{className:c.paper},r.a.createElement("form",{onSubmit:function(e){var t={name:e.target.elements.name.value};"edit"===o&&(t.id=a.params.itemId),n(t).then((function(e){"success"===e.result&&d("/admin/categories")})),e.preventDefault()}},r.a.createElement(N.a,{container:!0,spacing:3},r.a.createElement(N.a,{item:!0,sm:12},r.a.createElement(Oe.a,{id:"outlined-basic",className:c.textField,label:"Category name",margin:"normal",variant:"outlined",name:"name",defaultValue:t.name,required:!0})),r.a.createElement(N.a,{item:!0,sm:12},r.a.createElement(J.a,{type:"submit",variant:"contained",color:"primary",className:c.button,disabled:i},i?r.a.createElement(K.a,{size:"1rem"}):"Save"))))))))}var ht=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(y.a)(this,Object(E.a)(t).call(this,e))).state={action:""},a}return Object(O.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.loadItem,a=e.match,n=e.setTitle;a.params.itemId?(this.setState({action:"edit"}),n("Edit category"),t(a.params.itemId)):(this.setState({action:"add"}),n("Add category"))}},{key:"render",value:function(){console.log("Edit Request",this.props);var e=this.props,t=e.match,a=e.item,n=e.themes,o=e.update,i=e.loadingItem,c=e.saving,l=this.state.action;return i?r.a.createElement(De.a,null):r.a.createElement(gt,{action:l,item:"edit"==l?a:{},match:t,themes:n,update:o,saving:c})}}]),t}(r.a.Component),ft=Object(l.b)((function(e){var t=e.Admin.Category;return{items:t.items,item:t.item,loadingItem:t.loadingItem,saving:t.saving}}),(function(e){return{loadItem:function(t){return e({type:vt}),fetch("/api/category/get?id="+t).then((function(e){return e.ok?e.json():{}})).then((function(t){e({type:jt,payload:{item:t}})}))},setTitle:function(t){e({type:Ja,payload:t})},update:function(t){return e({type:xt}),fetch("/api/category/store",{method:"POST",body:JSON.stringify(t),headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.ok?e.json():{}})).then((function(t){return e({type:wt,payload:{item:t.data,result:t.result}}),t}))}}}))(ht);function bt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function yt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?bt(a,!0).forEach((function(t){Object(P.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):bt(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Et="Admin/Category/LoadItemsReq",Ot="Admin/Category/LoadItemsRes",vt="Admin/Category/LoadItemReq",jt="Admin/Category/LoadItemRes",xt="Admin/Category/SaveReq",wt="Admin/Category/SaveRes",Dt="Admin/Category/ShowDeleteDialog",Pt="Admin/Category/CloseDeleteDialog",St="Admin/Category/DeleteRes",kt={items:[],loadingItems:!1,item:{},loadingItem:!1,deleteDialogOpen:!1,deleteId:"",saving:!1},Ct=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case vt:return yt({},e,{loadingItem:!0});case jt:return yt({},e,{item:a=t.payload.item,loadingItem:!1});case Et:return yt({},e,{loadingItems:!0});case Ot:return yt({},e,{loadingItems:!1,items:t.payload.items});case xt:return yt({},e,{saving:!0});case wt:var a=t.payload.item,n=!1,r=e.items.map((function(e,t){return e&&e._id===a._id?(n=!0,a):e}));return n||r.push(a),yt({},e,{items:r,saving:!1});case Dt:return yt({},e,{deleteDialogOpen:!0,deleteId:t.payload.deleteId});case Pt:return yt({},e,{deleteDialogOpen:!1});case St:a=t.payload.item;return yt({},e,{items:e.items.filter((function(e){return e._id!==a._id}))});default:return e}},It=x("Categories","/categories",(function(e){return r.a.createElement("div",null,r.a.createElement(s.b,{exact:!0,path:e.match.path,component:dt}),r.a.createElement(s.b,{exact:!0,path:e.match.path+"/edit/:itemId",component:ft}),r.a.createElement(s.b,{exact:!0,path:e.match.path+"/add",component:ft}))}),Ct),qt=Object(A.a)((function(e){return{container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},textField:{width:"100%"},themesSelect:{width:"100%"},button:{float:"right"}}}));function At(e){var t=e.item,a=e.match,n=e.categories,o=e.update,i=e.action,c=e.saving,l=qt(),u=r.a.useState(""),m=Object(C.a)(u,2),d=m[0],p=m[1];return d?(console.log("redirecting",d),r.a.createElement(s.a,{to:d})):r.a.createElement(R.a,{maxWidth:"lg",className:l.container},r.a.createElement(N.a,{container:!0,spacing:3},r.a.createElement(N.a,{item:!0,xs:6},r.a.createElement(q.a,{to:"/admin/products"},r.a.createElement(J.a,{variant:"contained",color:"primary"},r.a.createElement(Se.a,null)," Back to list"))),r.a.createElement(N.a,{item:!0,xs:12},r.a.createElement(oe.a,{className:l.paper},r.a.createElement("form",{onSubmit:function(e){var t=e.target.elements,n={name:t.name.value,price:t.price.value,category:t.category.value};"edit"===i&&(n.id=a.params.itemId),o(n).then((function(e){"success"===e.result&&p("/admin/products")})),e.preventDefault()}},r.a.createElement(N.a,{container:!0,spacing:3},r.a.createElement(N.a,{item:!0,sm:6},r.a.createElement(Oe.a,{id:"outlined-basic",className:l.textField,label:"Name",margin:"normal",variant:"outlined",name:"name",defaultValue:t.name,required:!0})),r.a.createElement(N.a,{item:!0,sm:6},r.a.createElement(Rt,{options:n,value:t.category?t.category._id:""})),r.a.createElement(N.a,{item:!0,sm:12},r.a.createElement(Oe.a,{id:"outlined-basic",className:l.textField,label:"Price",margin:"normal",variant:"outlined",name:"price",defaultValue:t.price})),r.a.createElement(N.a,{item:!0,sm:12},r.a.createElement(J.a,{type:"submit",variant:"contained",color:"primary",className:l.button,disabled:c},c?r.a.createElement(K.a,{size:"1rem"}):"Save"))))))))}var Rt=function(e){var t=r.a.useState(e.value),a=Object(C.a)(t,2),n=a[0],o=a[1],i=qt(),c=r.a.useRef(null),l=r.a.useState(0),s=Object(C.a)(l,2),u=s[0],m=s[1];r.a.useEffect((function(){m(c.current.offsetWidth)}),[]);var d=e.options.map((function(e,t){return r.a.createElement(ve.a,{key:t,value:e._id},e.name)}));return r.a.createElement(xe.a,{variant:"outlined",margin:"normal",className:i.themesSelect},r.a.createElement(je.a,{ref:c,id:"demo-simple-select-outlined-label"},"Category"),r.a.createElement(we.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",name:"category",value:n,onChange:function(e){o(e.target.value)},labelWidth:u},d))},Nt=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(y.a)(this,Object(E.a)(t).call(this,e))).state={action:a.props.match.params.itemId?"edit":"add"},a}return Object(O.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.loadItem,a=e.match,n=e.setTitle,r=e.loadCategories,o=e.categories;a.params.itemId?(n("Edit product"),t(a.params.itemId)):n("Add product"),o.length||r()}},{key:"render",value:function(){console.log("Edit item",this.props);var e=this.props,t=e.match,a=e.item,n=e.update,o=e.loadingItem,i=e.saving,c=e.categories,l=this.state.action;return o?r.a.createElement(De.a,null):r.a.createElement(At,{action:l,item:"edit"==l?a:{},match:t,categories:c,update:n,saving:i})}}]),t}(r.a.Component),Tt=Object(l.b)((function(e){var t=e.Admin.Product,a=e.Admin.Category;return{items:t.items,item:t.item,loadingItem:t.loadingItem,saving:t.saving,categories:a.items}}),(function(e){return{loadItem:function(t){return e({type:Ht}),fetch("/api/product/get?id="+t).then((function(e){return e.ok?e.json():{}})).then((function(t){e({type:Wt,payload:{item:t}})}))},setTitle:function(t){e({type:Ja,payload:t})},update:function(t){return e({type:Lt}),fetch("/api/product/store",{method:"POST",body:JSON.stringify(t),headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.ok?e.json():{}})).then((function(t){return e({type:Mt,payload:{item:t.data,result:t.result}}),t}))},loadCategories:function(){return e({type:Et}),fetch("/api/category/get").then((function(e){return e.ok?e.json():[]})).then((function(t){e({type:Ot,payload:{items:t}})}))}}}))(Nt);function Bt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ft(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Bt(a,!0).forEach((function(t){Object(P.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Bt(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var _t="Admin/Product/LoadItemsReq",zt="Admin/Product/LoadItemsRes",Ht="Admin/Product/LoadItemReq",Wt="Admin/Product/LoadItemRes",Lt="Admin/Product/SaveReq",Mt="Admin/Product/SaveRes",Jt="Admin/Product/ShowDeleteDialog",Vt="Admin/Product/CloseDeleteDialog",Ut="Admin/Product/DeleteRes",Gt={items:[],loadingItems:!1,shouldLoadItems:!0,item:{},loadingItem:!1,deleteDialogOpen:!1,deleteId:"",saving:!1},Yt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ht:return Ft({},e,{loadingItem:!0});case Wt:return Ft({},e,{item:a=t.payload.item,loadingItem:!1});case _t:return Ft({},e,{loadingItems:!0});case zt:return Ft({},e,{loadingItems:!1,shouldLoadItems:!1,items:t.payload.items});case Lt:return Ft({},e,{saving:!0});case Mt:var a=t.payload.item,n=!1,r=e.items.map((function(e,t){return e&&e._id===a._id?(n=!0,a):e}));return n||r.push(a),Ft({},e,{items:r,saving:!1});case Jt:return Ft({},e,{deleteDialogOpen:!0,deleteId:t.payload.deleteId});case Vt:return Ft({},e,{deleteDialogOpen:!1});case Ut:a=t.payload.item;return Ft({},e,{items:e.items.filter((function(e){return e._id!==a._id}))});default:return e}},Kt=x("Products","/products",(function(e){return r.a.createElement("div",null,r.a.createElement(s.b,{exact:!0,path:e.match.path,component:ot}),r.a.createElement(s.b,{exact:!0,path:e.match.path+"/edit/:itemId",component:Tt}),r.a.createElement(s.b,{exact:!0,path:e.match.path+"/add",component:Tt}))}),Yt),Xt=a(312),$t=a(304),Qt=a(308),Zt=a(305),ea=a(292),ta=a(195),aa=a(309),na=a(289),ra=a(306),oa=a(112),ia=a.n(oa),ca=a(113),la=a.n(ca),sa=a(190),ua=a(302),ma=a(303),da=a(307);function pa(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ga(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?pa(a,!0).forEach((function(t){Object(P.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):pa(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ha(){return r.a.createElement(ae.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(q.a,{color:"inherit",to:"/"},"RJ")," ",(new Date).getFullYear(),".")}var fa=Object(A.a)((function(e){return{root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:ga({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(P.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(9)}),appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}})),ba=function(e){var t=e.items,a=e.accessRights;return t=t.map((function(e,t){if(a&&a.length&&a.indexOf(e.accessRightTitle)>=0||!e.accessRightTitle){var n=e.icon;return r.a.createElement(sa.a,{button:!0},r.a.createElement(ua.a,null,r.a.createElement(n,null)),r.a.createElement(q.a,{to:e.link},r.a.createElement(ma.a,{primary:e.text})))}})),r.a.createElement("div",null,t)};var ya=Object(l.b)((function(e){return{title:e.Admin.title,menuItems:e.Admin.menuItems,rights:e.Admin.user.rights}}),(function(e){return{logOut:function(){return e({type:Va}),fetch("/api/user/logout").then((function(e){return console.log("logged out"),""}))}}}))((function(e){var t=fa(),a=r.a.useState(!0),n=Object(C.a)(a,2),o=n[0],i=n[1];return Object(ne.a)(t.paper,t.fixedHeight),r.a.createElement("div",{className:t.root},r.a.createElement($t.a,null),r.a.createElement(Zt.a,{position:"absolute",className:Object(ne.a)(t.appBar,o&&t.appBarShift)},r.a.createElement(ea.a,{className:t.toolbar},r.a.createElement(na.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:function(){i(!0)},className:Object(ne.a)(t.menuButton,o&&t.menuButtonHidden)},r.a.createElement(ia.a,null)),r.a.createElement(ae.a,{component:"h1",variant:"h4",color:"inherit",noWrap:!0,className:t.title},e.title),r.a.createElement(na.a,{color:"inherit"},r.a.createElement(ra.a,{badgeContent:0,color:"secondary"},r.a.createElement(la.a,null))),r.a.createElement(na.a,{color:"inherit",title:"Log out",onClick:function(t){e.logOut().then((function(){e.history.goBack()}))}},r.a.createElement(da.a,null)))),r.a.createElement(Qt.a,{variant:"permanent",classes:{paper:Object(ne.a)(t.drawerPaper,!o&&t.drawerPaperClose)},open:o},r.a.createElement("div",{className:t.toolbarIcon},r.a.createElement(na.a,{onClick:function(){i(!1)}},r.a.createElement(Se.a,null))),r.a.createElement(aa.a,null),r.a.createElement(ta.a,null,r.a.createElement(ba,{items:e.menuItems,accessRights:e.rights}))),r.a.createElement("main",{className:t.content},r.a.createElement("div",{className:t.appBarSpacer}),e.children,r.a.createElement(ha,null)))})),Ea=a(310),Oa=a(311),va=a(315),ja=a(143),xa=a.n(ja);function wa(){return r.a.createElement(ae.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(Ge.a,{color:"inherit",href:"https://material-ui.com/"},"RJ")," ",(new Date).getFullYear(),".")}var Da=Object(A.a)((function(e){return{"@global":{body:{backgroundColor:e.palette.common.white}},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),Pa=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(y.a)(this,Object(E.a)(t).call(this,e))).changeHandler=function(e,t){a.setState(Object(P.a)({},e,t))},a.submitHandler=function(){a.props.signIn(a.state.email,a.state.password)},a.state={email:"",password:""},a}return Object(O.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.signIn,e.user),a=(e.match,this.state);a.email,a.password;if(t&&t.loggedIn){var n=window.localStorage.getItem("lastVisitedPath");return r.a.createElement(s.a,{to:n||"/admin"})}return r.a.createElement(R.a,{component:"main",maxWidth:"xs"},r.a.createElement($t.a,null),r.a.createElement(Sa,{changeHandler:this.changeHandler,submitHandler:this.submitHandler,failed:t.loginFailed}),r.a.createElement(va.a,{mt:8},r.a.createElement(wa,null)))}}]),t}(r.a.Component),Sa=function(e){var t=e.changeHandler,a=e.submitHandler,n=e.failed,o=Da();return r.a.createElement("div",{className:o.paper},r.a.createElement(Ea.a,{className:o.avatar},r.a.createElement(xa.a,null)),r.a.createElement(ae.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:o.form,onSubmit:function(e){e.preventDefault(),a()}},r.a.createElement(Oe.a,{error:n,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"username",autoComplete:"off",autoFocus:!0,onChange:function(e){return t("email",e.target.value)}}),r.a.createElement(Oe.a,{error:n,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"off",onChange:function(e){return t("password",e.target.value)}}),r.a.createElement(Oa.a,{control:r.a.createElement(te.a,{value:"remember",color:"primary"}),label:"Remember me"}),r.a.createElement(J.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:o.submit},"Sign In"),r.a.createElement(N.a,{container:!0},r.a.createElement(N.a,{item:!0,xs:!0},r.a.createElement(Ge.a,{href:"#",variant:"body2"},"Forgot password?")),r.a.createElement(N.a,{item:!0},r.a.createElement(Ge.a,{href:"#",variant:"body2"},"Don't have an account? Sign Up")))))},ka=Object(l.b)((function(e){return{user:e.Admin.user}}),(function(e){return{signIn:function(t,a){return console.log("signing in",t+a),e({type:La}),fetch("/admin/login",{method:"POST",body:JSON.stringify({username:t,password:a}),headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.ok?e.json():{}})).then((function(t){e({type:Ma,payload:t.user}),t.result}))}}}))(Pa);function Ca(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=function(a){function n(e){var t;return Object(f.a)(this,n),(t=Object(y.a)(this,Object(E.a)(n).call(this,e))).state={redirect:!1,loading:!0,hasAccessRight:!0},t}return Object(O.a)(n,a),Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this;console.log("withAuth mounted"),this.props.getActiveUser().then((function(a){var n=!0,r=!1;a&&a._id?!t||a.rights.indexOf(t)>=0||(n=!1):r=!0,e.setState({redirect:r,loading:!1,hasAccessRight:n})}))}},{key:"render",value:function(){console.log("withAuth",t);var a=this.state,n=a.redirect,o=a.loading,i=a.hasAccessRight,c=this.props;return o?r.a.createElement(De.a,null):(i||(console.log("has no access right",c.user.rights),console.log(c.user.rights.indexOf(t)),c.history.goBack()),!c.user.loggedIn&&n?(window.localStorage.setItem("lastVisitedPath",this.props.location.pathname),console.log("redirecting",c.match.path+"/login"),r.a.createElement(s.a,{to:"/admin/login"})):r.a.createElement(r.a.Fragment,null,r.a.createElement(e,this.props)))}}]),n}(n.Component);return Object(l.b)((function(e){return{user:e.Admin.user}}),(function(e){return{getActiveUser:function(){return e({type:La}),fetch("/api/user/active").then((function(e){return e.ok?e.json():{}})).then((function(t){return e({type:Ma,payload:t?t.user:{}}),t.user}))}}}))(a)}var Ia=a(145),qa=a(8),Aa="#FFFFFF",Ra={black:"#000000",white:Aa,primary:{contrastText:Aa,dark:qa.a.indigo[900],main:qa.a.indigo[500],light:qa.a.indigo[100]},secondary:{contrastText:Aa,dark:qa.a.blue[900],main:qa.a.blue.A400,light:qa.a.blue.A400},success:{contrastText:Aa,dark:qa.a.green[900],main:qa.a.green[600],light:qa.a.green[400]},info:{contrastText:Aa,dark:qa.a.blue[900],main:qa.a.blue[600],light:qa.a.blue[400]},warning:{contrastText:Aa,dark:qa.a.orange[900],main:qa.a.orange[600],light:qa.a.orange[400]},error:{contrastText:Aa,dark:qa.a.red[900],main:qa.a.red[600],light:qa.a.red[400]},text:{primary:qa.a.blueGrey[900],secondary:qa.a.blueGrey[600],link:qa.a.blue[600]},background:{default:"#F4F6F8",paper:Aa},icon:qa.a.blueGrey[600],divider:qa.a.grey[200]},Na={h1:{color:Ra.text.primary,fontWeight:500,fontSize:"35px",letterSpacing:"-0.24px",lineHeight:"40px"},h2:{color:Ra.text.primary,fontWeight:500,fontSize:"29px",letterSpacing:"-0.24px",lineHeight:"32px"},h3:{color:Ra.text.primary,fontWeight:500,fontSize:"24px",letterSpacing:"-0.06px",lineHeight:"28px"},h4:{color:Ra.text.primary,fontWeight:500,fontSize:"20px",letterSpacing:"-0.06px",lineHeight:"24px"},h5:{color:Ra.text.primary,fontWeight:500,fontSize:"16px",letterSpacing:"-0.05px",lineHeight:"20px"},h6:{color:Ra.text.primary,fontWeight:500,fontSize:"14px",letterSpacing:"-0.05px",lineHeight:"20px"},subtitle1:{color:Ra.text.primary,fontSize:"16px",letterSpacing:"-0.05px",lineHeight:"25px"},subtitle2:{color:Ra.text.secondary,fontWeight:400,fontSize:"14px",letterSpacing:"-0.05px",lineHeight:"21px"},body1:{color:Ra.text.primary,fontSize:"15px",letterSpacing:"-0.05px",lineHeight:"21px"},body2:{color:Ra.text.secondary,fontSize:"13px",letterSpacing:"-0.04px",lineHeight:"18px"},button:{color:Ra.text.primary,fontSize:"14px"},caption:{color:Ra.text.secondary,fontSize:"11px",letterSpacing:"0.33px",lineHeight:"13px"},overline:{color:Ra.text.secondary,fontSize:"11px",fontWeight:500,letterSpacing:"0.33px",lineHeight:"13px",textTransform:"uppercase"}};function Ta(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var Ba={MuiButton:{contained:{boxShadow:"0 1px 1px 0 rgba(0,0,0,0.14), 0 2px 1px -1px rgba(0,0,0,0.12), 0 1px 3px 0 rgba(0,0,0,0.20)",backgroundColor:"#FFFFFF"}},MuiIconButton:{root:{color:Ra.icon,"&:hover":{backgroundColor:"rgba(0, 0, 0, 0.03)"}}},MuiPaper:{elevation1:{boxShadow:"0 0 0 1px rgba(63,63,68,0.05), 0 1px 3px 0 rgba(63,63,68,0.15)"}},MuiTableCell:{root:function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ta(a,!0).forEach((function(t){Object(P.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ta(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},Na.body1,{borderBottom:"1px solid ".concat(Ra.divider)})},MuiTableHead:{root:{backgroundColor:qa.a.grey[50]}},MuiTypography:{gutterBottom:{marginBottom:8}}},Fa=Object(Ia.a)({palette:Ra,typography:Na,overrides:Ba,zIndex:{appBar:1200,drawer:1100}}),_a=function(e){function t(e){return Object(f.a)(this,t),Object(y.a)(this,Object(E.a)(t).call(this,e))}return Object(O.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this.props;if(console.log("Admin",e),e.location.pathname!==e.match.path+"/login")var t=e.routes.map((function(t,a){return r.a.createElement(s.b,{exact:t.path===e.match.path+"/",path:t.path,key:t.path,component:Ca(t.component,t.title),title:t.title})})),a=r.a.createElement(ya,e,t);else a="";return r.a.createElement(Xt.a,{theme:Fa},r.a.createElement(s.b,{exact:!0,path:e.match.path+"/login",component:ka}),a)}}]),t}(r.a.Component);function za(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ha(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?za(a,!0).forEach((function(t){Object(P.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):za(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Wa,La="Admin/SignInReq",Ma="Admin/SignInRes",Ja="Admin/SetTitle",Va="Admin/LogOut",Ua={title:"Dashboard",menuItems:[{text:"Dashboard",accessRightTitle:"Dashboard",link:"/admin",icon:S.a},{text:"Employees",accessRightTitle:"Employees",link:"/admin/employees",icon:k.a},{text:"Products",accessRightTitle:"Products",link:"/admin/products",icon:k.a},{text:"Categories",accessRightTitle:"Categories",link:"/admin/categories",icon:k.a}]},Ga={loggedIn:!1,authenticating:!1},Ya=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ga,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case La:return Ha({},e,{authenticating:!0});case Ma:var a=t.payload;return a&&a.username?Ha({},e,{},t.payload,{loggedIn:!0,authenticating:!1}):Ha({},e,{loginFailed:!0,authenticating:!1,loggedIn:!1});case Va:return Ga;default:return e}},Ka={Profile:D,Admin:x("Admin","/admin",_a,(function(){var e,t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ua,n=arguments.length>1?arguments[1]:void 0;return Ha({},Ua,{Dashboard:$e(a.Dashboard,n),Request:Ve(a.Request,n),Product:Yt(a.Product,n),Category:Ct(a.Category,n),user:Ya(a.user,n),title:(e=a.title,t=n,t.type===Ja?t.payload:e)})}),{Request:Ue,Dashboard:Qe,Product:Kt,Category:It})},Xa=(Wa=Object(g.c)(function(e){for(var t={},a=w(e),n=0;n<a.length;n++){var r=a[n].reducer;if("function"!==typeof r)throw new Error("Module "+n+" does not define reducer!");t[a[n].MODULE]=r}return t}(Ka)),Object(g.d)(Wa,Object(g.a)(Object(h.createLogger)()))),$a=function(e){return r.a.createElement(s.a,{to:"/admin"})},Qa=function(e,t,a,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f";return[{path:"/",title:r,component:a,routes:w(e).map((function(e){if(console.log("x",e),!e.component)throw new Error("Component for module "+e+" is not defined");var a={path:e.path,title:e.title,component:e.component,onEnter:e.onEnter?function(a){e.onEnter(a,t.dispatch)}:null};return e.children&&(a.routes=Object.keys(e.children).map((function(a){var n=e.children[a];if(!n.component)throw new Error("Component for module "+e+"/"+a+" is not defined");return{path:e.path+n.path,title:n.title,component:n.component,onEnter:n.onEnter?function(e){n.onEnter(e,t.dispatch)}:null}}))),a}))}]}(Ka,Xa,(function(e){console.log("App",e);var t=e.routes.map((function(e,t){return e.routes&&e.routes.length?r.a.createElement(s.b,{path:e.path,key:e.path,render:function(t){return r.a.createElement(e.component,Object.assign({},t,{title:e.title,routes:e.routes}))}}):r.a.createElement(s.b,{path:e.path,key:e.path,component:e.component})}));return r.a.createElement("div",null,r.a.createElement(s.b,{exact:!0,path:e.match.path,component:$a}),t)}),$a);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));console.log("routes",Qa),console.log("store",Xa),i.a.render(r.a.createElement(c.AppContainer,null,r.a.createElement(u,{store:Xa,history:p,routes:Qa})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[173,1,2]]]);
//# sourceMappingURL=main.b0e940c0.chunk.js.map